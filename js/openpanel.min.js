/*!
=====================================

OpenPanel by SONHLAB.com - version 2.2
website: http://sonhlab.com
Documentation: http://docs.sonhlab.com/openpanel-responsive-panel-anywhere/

build - 0005
=====================================
*/

!function(o){var t=function(t,n){function a(t){var n,a={};o("html").hasClass("op-html")||o("html").addClass("op-html"),o("#op-station").find("#"+t).css({height:"auto"}),o("#op-station").find(".op-panel").each(function(){var t=parseInt(o(this).css("z-index"),10);t>T&&(T=t)}),T+=1,n=o("#op-station").find("#"+t).height(),k>n&&(n=k),a.height=n+"px",a["z-index"]=T,void 0!==t&&o("#op-station").find("#"+t).css(a)}function i(t,n,p,d){n||(n="none"),C>1&&(m=C-1,x=o("#op-station").scrollTop(),o("#op-station").find('.op-panel[data-open="'+m+'"]').attr("data-scrollto",x),o("#op-station").find('.op-panel[data-open="'+m+'"]').css({top:"-"+x+"px"})),o("#op-station").removeClass("op-station-overflow"),o("#op-station").css({display:"block"}),o("#op-loadingholder").css({display:"block"}),o("#"+t).length?(o("#op-station").css({display:"block"}),a(t),o("#op-station").find(".op-panelctrl").css({width:"100%",display:"none"}),s(t,n)):("dynamic"==d?(w="content/openpanel/ajaxstation."+p,b="panelid="+t):(w="content/openpanel/"+t+"."+p,b=""),o.ajax({url:w,type:"POST",data:b,cache:!1,success:function(c){c&&(o("#op-station").append(c),o("#op-station").find("#"+t).length>0&&(a(t),o("#op-station").find(".op-panelctrl").css({width:"100%",display:"none"}),s(t,n),o("#"+t).find(".op-tab").on("click",function(){t=o(this).attr("data-panelid"),n=o(this).attr("data-pos"),p=o(this).attr("data-ext"),void 0===p?(p=g.ext,d="dynamic"):d="static",i(t,n,p.$ajaxtype)}),o("#"+t).find(".op-bt-close").on("click",function(){v=o(this).attr("data-close"),e(v)}),o("#"+t).find(".op-bt-closeall").on("click",function(){l()})))},error:function(){alert("Loading Error: Please check the Panel ID or your Server config."),o("#op-station").css({display:"none"}),o("#op-loadingholder").css({display:"none"})}}))}function p(t){o("#op-loadingholder").css({display:"none"}),o("#op-station").find('.op-panel[data-open="'+S+'"]').css({display:"none",position:"absolute",top:0}),2==C&&(y=o("html").scrollTop()+o("body").scrollTop(),o("body").css({position:"fixed",top:"-"+y+"px"})),o("body").css({overflow:"hidden"}),o("#op-station").hasClass("op-station-overflow")||o("#op-station").addClass("op-station-overflow"),o("#op-station").scrollTop(0),u=o("#op-station").find("#"+t).width(),o("#op-station").find("#"+t).find(".op-panelctrl").css({width:u+"px",display:"block"}),o("#op-station").find(".op-panelctrl").find(".op-bt-closeall").css(o("#op-station").find(".op-panel:visible").attr("data-open")>1?{display:"block"}:{display:"none"})}function s(t,n){var a={};o("#op-station").find("#"+t).attr("data-open",C),S=C-1,C++,o("#op-station").find('.op-panel[data-open="'+S+'"]').css({position:"fixed"}),"left"==n?(a.left="-"+o(window).width()+"px",a.top="0px",a.display="block",o("#"+t).css(a),o("#"+t).animate({left:"0px"},g.animSpeed,"swing",function(){p(t)})):"right"==n?(a.left=o(window).width()+"px",a.top="0px",a.display="block",o("#"+t).css(a),o("#"+t).animate({left:"0px"},g.animSpeed,"swing",function(){p(t)})):"bottom"==n?(a.top=o(window).height()+"px",a.display="block",o("#"+t).css(a),o("#"+t).animate({top:"0px"},g.animSpeed,"swing",function(){p(t)})):"top"==n?(a.top="-"+o(window).height()+"px",a.display="block",o("#"+t).css(a),o("#"+t).animate({top:"0px"},g.animSpeed,"swing",function(){p(t)})):(a.top="-2000px",a.display="none",o("#"+t).css(a),o("#"+t).animate({top:"0px"},10,function(){o("#"+t).fadeIn(g.animSpeed,function(){p(t)})}))}function e(t){C--,S>0&&(o("#op-station").find('.op-panel[data-open="'+S+'"]').css({display:"block"}),u=o("#op-station").find('.op-panel[data-open="'+S+'"]').width(),o("#op-station").find('.op-panel[data-open="'+S+'"]').find(".op-panelctrl").css({width:u+"px",display:"block"}),x=o("#op-station").find('.op-panel[data-open="'+S+'"]').attr("data-scrollto"),o("#op-station").scrollTop(x)),S--,(0==S||0==o("#op-station").find('.op-panel[data-open="'+S+'"]').length)&&o("#op-station").find(".op-panel").find(".op-panelctrl").find(".op-bt-closeall").css({display:"none"}),1==o("#op-station").find(".op-panel:visible").length&&(o("#op-station").removeClass("op-station-overflow"),o("body").css({position:"relative",top:0}),o("html").scrollTop(y),o("body").scrollTop(y),C=1),o("#"+t).fadeOut(g.animSpeed,function(){o(this).attr("data-open",0),o(this).find(".op-panelctrl").css({display:"none"}),0==o("#op-station").find(".op-panel:visible").length&&(o("#op-station").css({display:"none"}),o("body").css({overflow:"auto"}),o("html").removeClass("op-html"))})}function l(){o("#op-station").removeClass("op-station-overflow"),o("body").css({position:"relative",top:0}),o("html").scrollTop(y),o("body").scrollTop(y),o(".op-panel").css({display:"none"}),o("#op-station").css({display:"none"}),o("#op-station").find(".op-panelctrl").css({display:"none"}),o("body").css({overflow:"auto"}),o("html").removeClass("op-html"),o("#op-station").find(".op-panel").attr("data-open",0),C=1}function d(o,t){var n,t=t||200;return function(){var a=this,i=arguments;clearTimeout(n),n=setTimeout(function(){o.apply(a,Array.prototype.slice.call(i))},t)}}var c,f,r,h,u,y,v,w,b,m,x,g=o.extend({},o.fn.openpanel.defaults,n),k=o(window).height(),T=0,C=1,S=0;o("#op-station").length||o("body").append("<div id='op-station'></div>"),o("#op-station").find("#op-loadingholder").length||o("#op-station").append("<div id='op-loadingholder'><div id='op-loadingicon'></div></div>"),o("#op-station").css({height:k+"px"}),o("#op-station").find(".op-panel").attr("data-open",0),o(t).find(".op-tab").on("click",function(){c=o(this).attr("data-panelid"),f=o(this).attr("data-pos"),r=o(this).attr("data-ext"),void 0===r?(r=g.ext,h="dynamic"):h="static",i(c,f,r,h)}),o("#op-station").find(".op-bt-close").on("click",function(){v=o(this).attr("data-close"),e(v)}),o("#op-station").find(".op-bt-closeall").on("click",function(){l()}),1==g.enableKeys&&o(document).keydown(function(o){return 27==o.keyCode?(l(),!1):void 0}),void 0!==g.autoPanel&&(c=g.autoPanel,r=g.ext,h="dynamic",i(c,f,r,h)),o(window).resize(d(function(){var t;k=o(window).height(),o("#op-station").css({height:k+"px"}),o("#op-station").find(".op-panel").css({height:"auto"});for(var n=o("#op-station").find(".op-panel").length,a=0;n>a;a++)t=o("#op-station").find(".op-panel").eq(a).height(),k>t&&(t=k),o("#op-station").find(".op-panel").eq(a).css({height:t+"px"});u=o("#op-station").find("#"+c).width(),o("#op-station").find(".op-panel").find(".op-panelctrl").css({width:u+"px",display:"block"})}))};o.fn.openpanel=function(n){return this.each(function(){if(o(this).data("openpanel"))return o(this).data("openpanel");var a=new t(this,n);o(this).data("openpanel",a)})},o.fn.openpanel.defaults={ext:"php",animSpeed:400,enableKeys:!1}}(jQuery);